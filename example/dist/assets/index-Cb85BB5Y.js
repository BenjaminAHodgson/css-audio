(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))i(t);new MutationObserver(t=>{for(const e of t)if(e.type==="childList")for(const c of e.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function r(t){const e={};return t.integrity&&(e.integrity=t.integrity),t.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?e.credentials="include":t.crossOrigin==="anonymous"?e.credentials="omit":e.credentials="same-origin",e}function i(t){if(t.ep)return;t.ep=!0;const e=r(t);fetch(t.href,e)}})();function f(o){const n=o.frequencyBinCount;let r=new Uint8Array(n);o.getByteFrequencyData(r);const{lowSum:i,midSum:t,highSum:e}=m(r,n);document.documentElement.style.setProperty("--freq-low",`${i}`),document.documentElement.style.setProperty("--freq-mid",`${t}`),document.documentElement.style.setProperty("--freq-high",`${e}`),document.documentElement.style.setProperty("--track-time",`${o.context.currentTime.toFixed(3)}`)}function m(o,n){let r=0,i=0,t=0;for(let e=0;e<n;e++)e<n/3?r+=o[e]:e<n/3*2?i+=o[e]:t+=o[e];return{lowSum:r,midSum:i,highSum:t}}async function y(o){const{animationFrameCallback:n=f,src:r}=o,i=await fetch(r).then(e=>e.arrayBuffer());async function t(){const e=new(window.AudioContext||window.webkitAudioContext),c=e.createBufferSource(),s=e.createAnalyser(),l=e.createGain(),u=await e.decodeAudioData(i.slice(0));document.documentElement.style.setProperty("--track-duration",`${u.duration.toFixed(3)}`),c.buffer=u,c.connect(s).connect(l).connect(e.destination),c.addEventListener("ended",()=>{e.close()}),o.beforeStart&&o.beforeStart(c,e),c.start(0);function d(){n(s),requestAnimationFrame(d)}return d(),{context:e,source:c,analyser:s}}return t}document.addEventListener("DOMContentLoaded",async()=>{const o=await y({src:"/elevator.wav"});async function n(){a(),document.removeEventListener("click",n);const{source:r}=await o();r.addEventListener("ended",()=>{a(),document.addEventListener("click",n)})}document.addEventListener("click",n)});function a(){document.body.classList.toggle("playing")}
